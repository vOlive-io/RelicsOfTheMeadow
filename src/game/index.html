<script type="module">
  import { factions } from "../../data/factions.js";

  // get chosen faction (maybe stored earlier)
  const chosenFactionName = localStorage.getItem("chosenFaction") || "The Crimson Horde";
  const faction = factions.find(f => f.name === chosenFactionName);

  // safety defaults in case faction or its properties are missing
  const defaultTraits = faction?.defaultTraits || { prowess: 0, resilience: 0, economy: 0 };
  const relicList = Array.isArray(faction?.relics) ? faction.relics.join(", ") : "None";
  const energy = faction?.energy ?? 0;
  const gold = faction?.gold ?? 0;

  if (faction) {
    document.getElementById("faction-name").textContent = `${faction.emoji} ${faction.name}`;
    document.getElementById("stats").textContent =
      `Prowess: ${defaultTraits.prowess} | Resilience: ${defaultTraits.resilience} | Economy: ${defaultTraits.economy}`;
    document.getElementById("relics").textContent = `Relics: ${relicList}`;
    document.getElementById("energy").textContent = `Energy: ${energy} ‚ö° | Gold: ${gold} üí∞`;
  } else {
    document.getElementById("faction-name").textContent = "‚ùì Unknown Faction";
    document.getElementById("stats").textContent = "No stats available.";
    document.getElementById("relics").textContent = "Relics: None";
    document.getElementById("energy").textContent = "Energy: 0 ‚ö° | Gold: 0 üí∞";
  }
</script>
